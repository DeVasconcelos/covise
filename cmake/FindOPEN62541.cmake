# - Find OPEN62541
# Find the OPEN62541 includes and library
#
#  OPEN62541_INCLUDE_DIR - Where to find OPEN62541 includes
#  OPEN62541_LIBRARIES   - List of libraries when using OPEN62541
#  OPEN62541_FOUND       - True if OPEN62541 was found

IF(OPEN62541_INCLUDE_DIR)
  SET(OPEN62541_FIND_QUIETLY TRUE)
ENDIF(OPEN62541_INCLUDE_DIR)

FIND_PATH(OPEN62541_INCLUDE_DIR "open62541/server_config_default.h"
  PATHS
  $ENV{OPEN62541_HOME}/include
  $ENV{EXTERNLIBS}/open62541/include
  ~/Library/Frameworks
  /Library/Frameworks
  /usr/local/include
  /usr/include
  /sw # Fink
  /opt/local # DarwinPorts
  /opt/csw # Blastwave
  /opt
  PATH_SUFFIXES OPEN62541-1.15 OPEN62541-1.14 OPEN62541-1.13 OPEN62541-1.12 OPEN62541-1.11 OPEN62541-1.10 OPEN62541-1.9 OPEN62541-1.8 OPEN62541-1.7 OPEN62541
  DOC "OPEN62541 - Headers"
)

SET(OPEN62541_NAMES open62541)
SET(OPEN62541_DBG_NAMES open62541d)

FIND_LIBRARY(OPEN62541_LIBRARY NAMES ${OPEN62541_NAMES}
  PATHS
  $ENV{OPEN62541_HOME}
  $ENV{EXTERNLIBS}/open62541
  ~/Library/Frameworks
  /Library/Frameworks
  /usr/local
  /usr
  /sw
  /opt/local
  /opt/csw
  /opt
  PATH_SUFFIXES lib lib64
  DOC "OPEN62541 - Library"
)

INCLUDE(FindPackageHandleStandardArgs)

IF(MSVC)
  # VisualStudio needs a debug version
  FIND_LIBRARY(OPEN62541_LIBRARY_DEBUG NAMES ${OPEN62541_DBG_NAMES}
    PATHS
    $ENV{OPEN62541_HOME}
    $ENV{EXTERNLIBS}/OPEN62541
    PATH_SUFFIXES lib lib64
    DOC "OPEN62541 - Library (Debug)"
  )
  
  IF(OPEN62541_LIBRARY_DEBUG AND OPEN62541_LIBRARY)
    SET(OPEN62541_LIBRARIES optimized ${OPEN62541_LIBRARY} debug ${OPEN62541_LIBRARY_DEBUG} )
  ENDIF(OPEN62541_LIBRARY_DEBUG AND OPEN62541_LIBRARY)

  FIND_PACKAGE_HANDLE_STANDARD_ARGS(OPEN62541 DEFAULT_MSG OPEN62541_LIBRARY OPEN62541_LIBRARY_DEBUG )

  MARK_AS_ADVANCED(OPEN62541_LIBRARY OPEN62541_LIBRARY_DEBUG OPEN62541_INCLUDE_DIR)
  
ELSE(MSVC)
  # rest of the world
  SET(OPEN62541_LIBRARIES ${OPEN62541_LIBRARY} ${OPEN62541_IO_LIBRARY} ${OPEN62541_OOC_LIBRARY})

  FIND_PACKAGE_HANDLE_STANDARD_ARGS(OPEN62541 DEFAULT_MSG OPEN62541_LIBRARY)
  
  MARK_AS_ADVANCED(OPEN62541_LIBRARY OPEN62541_INCLUDE_DIR)
  
ENDIF(MSVC)

IF(OPEN62541_FOUND)
  SET(OPEN62541_INCLUDE_DIRS ${OPEN62541_INCLUDE_DIR})
ENDIF(OPEN62541_FOUND)
